<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Nec::Projector::NpSeries
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Nec::Projector::NpSeries";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (N)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Nec.html" title="Nec (module)">Nec</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Projector.html" title="Nec::Projector (module)">Projector</a></span></span>
     &raquo; 
    <span class="title">NpSeries</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Nec::Projector::NpSeries
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Nec::Projector::NpSeries</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Orchestrator::Constants, Orchestrator::Transcoder</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>modules/nec/projector/np_series.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Documentation: <a
href="https://aca.im/driver_docs/NEC/2014%20Control_Commands_for_NEC_Projector_rev_3.4.09b.pdf">aca.im/driver_docs/NEC/2014%20Control_Commands_for_NEC_Projector_rev_3.4.09b.pdf</a></p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="COMMAND-constant" class="">COMMAND =
          <div class="docstring">
  <div class="discussion">
    
<p>Command Listing</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Second</span> <span class='id identifier rubyid_byte'>byte</span> <span class='id identifier rubyid_used'>used</span> <span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_detect'>detect</span> <span class='id identifier rubyid_command'>command</span> <span class='id identifier rubyid_type'>type</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='comment'># Mute controls
</span>    <span class='symbol'>:mute_picture</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$02,$10,$00,$00,$00,$12</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:unmute_picture</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$02,$11,$00,$00,$00,$13</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:mute_audio_cmd</span> <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>02H 12H 00H 00H 00H 14H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:unmute_audio</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>02H 13H 00H 00H 00H 15H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:mute_onscreen</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>02H 14H 00H 00H 00H 16H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:unmute_onscreen</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>02H 15H 00H 00H 00H 17H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>

    <span class='symbol'>:freeze_picture</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$01,$98,$00,$00,$01,$01,$9B</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:unfreeze_picture</span> <span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$01,$98,$00,$00,$01,$02,$9C</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>

    <span class='symbol'>:status_lamp</span> <span class='op'>=&gt;</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00H 81H 00H 00H 00H 81H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>        <span class='comment'># Running sense (ret 81)
</span>    <span class='symbol'>:status_input</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$00,$85,$00,$00,$01,$02,$88</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># Input status (ret 85)
</span>    <span class='symbol'>:status_mute</span> <span class='op'>=&gt;</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00H 85H 00H 00H 01H 03H 89H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># MUTE STATUS REQUEST (Check 10H on byte 5)
</span>    <span class='symbol'>:status_error</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00H 88H 00H 00H 00H 88H</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>        <span class='comment'># ERROR STATUS REQUEST (ret 88)
</span>    <span class='symbol'>:status_model</span> <span class='op'>=&gt;</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>00H 85H 00H 00H 01H 04H 8A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># request model name (both of these are related)
</span>
    <span class='comment'># lamp hours / remaining information
</span>    <span class='symbol'>:lamp_information</span> <span class='op'>=&gt;</span>   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>03H 8AH 00H 00H 00H 8DH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>        <span class='comment'># LAMP INFORMATION REQUEST
</span>    <span class='symbol'>:filter_information</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>03H 8AH 00H 00H 00H 8DH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:projector_information</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>03H 8AH 00H 00H 00H 8DH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>

    <span class='symbol'>:background_black</span> <span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$03,$B1,$00,$00,$02,$0B,$01,$C2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># set mute to be a black screen
</span>    <span class='symbol'>:background_blue</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$03,$B1,$00,$00,$02,$0B,$00,$C1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='comment'># set mute to be a blue screen
</span>    <span class='symbol'>:background_logo</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$03,$B1,$00,$00,$02,$0B,$02,$C3</span><span class='tstring_end'>&quot;</span></span>    <span class='comment'># set mute to be the company logo
</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="AUDIO-constant" class="">AUDIO =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>hdmi:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>vga:</span> <span class='int'>1</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="INPUTS-constant" class="">INPUTS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='symbol'>:vga1</span> <span class='op'>=&gt;</span>        <span class='int'>0x01</span><span class='comma'>,</span>
    <span class='symbol'>:vga</span> <span class='op'>=&gt;</span>            <span class='int'>0x01</span><span class='comma'>,</span>
    <span class='symbol'>:rgbhv</span> <span class='op'>=&gt;</span>        <span class='int'>0x02</span><span class='comma'>,</span>    <span class='comment'># \
</span>    <span class='symbol'>:dvi_a</span> <span class='op'>=&gt;</span>        <span class='int'>0x02</span><span class='comma'>,</span>    <span class='comment'>#  } - all of these are the same
</span>    <span class='symbol'>:vga2</span> <span class='op'>=&gt;</span>        <span class='int'>0x02</span><span class='comma'>,</span>    <span class='comment'># /
</span>
    <span class='symbol'>:composite</span> <span class='op'>=&gt;</span>    <span class='int'>0x06</span><span class='comma'>,</span>
    <span class='symbol'>:svideo</span> <span class='op'>=&gt;</span>        <span class='int'>0x0B</span><span class='comma'>,</span>

    <span class='symbol'>:component1</span> <span class='op'>=&gt;</span>    <span class='int'>0x10</span><span class='comma'>,</span>
    <span class='symbol'>:component</span> <span class='op'>=&gt;</span>    <span class='int'>0x10</span><span class='comma'>,</span>
    <span class='symbol'>:component2</span> <span class='op'>=&gt;</span>    <span class='int'>0x11</span><span class='comma'>,</span>

    <span class='symbol'>:hdmi</span> <span class='op'>=&gt;</span>        <span class='int'>0x1A</span><span class='comma'>,</span>    <span class='comment'># \
</span>    <span class='symbol'>:dvi</span> <span class='op'>=&gt;</span>            <span class='int'>0x1A</span><span class='comma'>,</span>    <span class='comment'># | - These are the same
</span>    <span class='symbol'>:hdmi2</span> <span class='op'>=&gt;</span>        <span class='int'>0x1B</span><span class='comma'>,</span>
    <span class='symbol'>:display_port</span> <span class='op'>=&gt;</span> <span class='int'>0xA6</span><span class='comma'>,</span>

    <span class='symbol'>:lan</span> <span class='op'>=&gt;</span>            <span class='int'>0x20</span><span class='comma'>,</span>
    <span class='symbol'>:viewer</span> <span class='op'>=&gt;</span>        <span class='int'>0x1F</span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected-instance_method" title="#connected (instance method)">#<strong>connected</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list note-list"><dt>Connect and request projector status    NOTE
<dd>
<p>Only connected and disconnected are threadsafe        Access of other
variables should be protected outside of these functions.</p>
</dd></dl>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnected-instance_method" title="#disconnected (instance method)">#<strong>disconnected</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute-instance_method" title="#mute (instance method)">#<strong>mute</strong>(state = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Mutes everything.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute_audio-instance_method" title="#mute_audio (instance method)">#<strong>mute_audio</strong>(mute = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Support naitive Audio Mute.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_load-instance_method" title="#on_load (instance method)">#<strong>on_load</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets up any constants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_unload-instance_method" title="#on_unload (instance method)">#<strong>on_unload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_update-instance_method" title="#on_update (instance method)">#<strong>on_update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#power-instance_method" title="#power (instance method)">#<strong>power</strong>(power)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the lamp power value.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#power%3F-instance_method" title="#power? (instance method)">#<strong>power?</strong>(options = {}, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#received-instance_method" title="#received (instance method)">#<strong>received</strong>(data, resolve, command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return true if command success, nil if still waiting, false if fail.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_audio-instance_method" title="#switch_audio (instance method)">#<strong>switch_audio</strong>(input)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Switches HDMI audio.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_to-instance_method" title="#switch_to (instance method)">#<strong>switch_to</strong>(input)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unmute-instance_method" title="#unmute (instance method)">#<strong>unmute</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>unmutes everything desirable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#volume-instance_method" title="#volume (instance method)">#<strong>volume</strong>(vol)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Volume Modification.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="connected-instance_method">
  
    #<strong>connected</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Connect and request projector status</p>

<pre class="code ruby"><code class="ruby"><span class='const'>NOTE</span><span class='op'>::</span> <span class='const'>Only</span> <span class='id identifier rubyid_connected'>connected</span> <span class='kw'>and</span> <span class='id identifier rubyid_disconnected'>disconnected</span> <span class='id identifier rubyid_are'>are</span> <span class='id identifier rubyid_threadsafe'>threadsafe</span>
    <span class='const'>Access</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_other'>other</span> <span class='id identifier rubyid_variables'>variables</span> <span class='id identifier rubyid_should'>should</span> <span class='id identifier rubyid_be'>be</span> <span class='id identifier rubyid_protected'>protected</span> <span class='id identifier rubyid_outside'>outside</span> <span class='id identifier rubyid_of'>of</span> <span class='id identifier rubyid_these'>these</span> <span class='id identifier rubyid_functions'>functions</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_connected'>connected</span>
    <span class='comment'>#
</span>    <span class='comment'># Get current state of the projector
</span>    <span class='comment'>#
</span>    <span class='id identifier rubyid_do_poll'>do_poll</span>

    <span class='comment'>#
</span>    <span class='comment'># Get the state every 50 seconds :)
</span>    <span class='comment'>#
</span>    <span class='id identifier rubyid_schedule'>schedule</span><span class='period'>.</span><span class='id identifier rubyid_every'>every</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>50s</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_do_poll'>do_poll</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disconnected-instance_method">
  
    #<strong>disconnected</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disconnected'>disconnected</span>
    <span class='comment'>#
</span>    <span class='comment'># Perform any cleanup functions here
</span>    <span class='comment'>#
</span>    <span class='id identifier rubyid_schedule'>schedule</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>

    <span class='comment'># Disconnect often occurs on power off
</span>    <span class='comment'># We may have not received a status response before the disconnect occurs
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mute-instance_method">
  
    #<strong>mute</strong>(state = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Mutes everything</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mute'>mute</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span>
        <span class='id identifier rubyid_mute_picture'>mute_picture</span>
        <span class='id identifier rubyid_mute_onscreen'>mute_onscreen</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_unmute'>unmute</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mute_audio-instance_method">
  
    #<strong>mute_audio</strong>(mute = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Support naitive Audio Mute</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mute_audio'>mute_audio</span><span class='lparen'>(</span><span class='id identifier rubyid_mute'>mute</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_mute'>mute</span>
        <span class='id identifier rubyid_mute_audio_cmd'>mute_audio_cmd</span>
    <span class='kw'>else</span>
        <span class='id identifier rubyid_unmute_audio'>unmute_audio</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_load-instance_method">
  
    #<strong>on_load</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets up any constants</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_load'>on_load</span>
    <span class='comment'>#
</span>    <span class='comment'># Setup constants
</span>    <span class='comment'>#
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    
    <span class='id identifier rubyid_on_update'>on_update</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_unload-instance_method">
  
    #<strong>on_unload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_unload'>on_unload</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_update-instance_method">
  
    #<strong>on_update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_update'>on_update</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_stable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input_stable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>

    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:volume_min</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_setting'>setting</span><span class='lparen'>(</span><span class='symbol'>:volume_min</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:volume_max</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_setting'>setting</span><span class='lparen'>(</span><span class='symbol'>:volume_max</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>63</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="power-instance_method">
  
    #<strong>power</strong>(power)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the lamp power value</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_power'>power</span><span class='lparen'>(</span><span class='id identifier rubyid_power'>power</span><span class='rparen'>)</span>
    <span class='comment'>#:lamp_on =&gt;        &quot;$02,$00,$00,$00,$00,$02&quot;,
</span>    <span class='comment'>#:lamp_off =&gt;        &quot;$02,$01,$00,$00,$00,$03&quot;,
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_stable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0x02</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x02</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_negatory?'>is_negatory?</span><span class='lparen'>(</span><span class='id identifier rubyid_power'>power</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>        <span class='comment'># power off
</span>        <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>    <span class='comment'># checksum
</span>        <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Off</span>

        <span class='comment'># Jump ahead of any other queued commands as they are no longer important
</span>        <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='lbrace'>{</span>
            <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='symbol'>:power</span><span class='comma'>,</span>
            <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='int'>60000</span><span class='comma'>,</span>  <span class='comment'># don&#39;t want retries occuring very fast
</span>            <span class='symbol'>:delay</span> <span class='op'>=&gt;</span> <span class='int'>30000</span><span class='comma'>,</span>
            <span class='symbol'>:clear_queue</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
            <span class='symbol'>:priority</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span>
            <span class='symbol'>:delay_on_receive</span> <span class='op'>=&gt;</span> <span class='int'>200</span>  <span class='comment'># give it a little bit of breathing room
</span>        <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>On</span>
        <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='symbol'>:power</span><span class='comma'>,</span> <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='int'>15000</span><span class='comma'>,</span> <span class='symbol'>:delay</span> <span class='op'>=&gt;</span> <span class='int'>1000</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="power?-instance_method">
  
    #<strong>power?</strong>(options = {}, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_power?'>power?</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:emit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:hex_string</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#COMMAND-constant" title="Nec::Projector::NpSeries::COMMAND (constant)">COMMAND</a></span></span><span class='lbracket'>[</span><span class='symbol'>:status_lamp</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="received-instance_method">
  
    #<strong>received</strong>(data, resolve, command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return true if command success, nil if still waiting, false if fail</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_received'>received</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_resolve'>resolve</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>
    <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_str_to_array'>str_to_array</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='id identifier rubyid_str_to_array'>str_to_array</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_command'>command</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span>
    
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NEC projector sent: 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    
    <span class='comment'>#
</span>    <span class='comment'># Command failed
</span>    <span class='comment'>#
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='int'>0xA0</span> <span class='op'>==</span> <span class='int'>0xA0</span>
        <span class='comment'>#
</span>        <span class='comment'># We were changing power state at time of failure we should keep trying
</span>        <span class='comment'>#
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_req'>req</span> <span class='op'>&amp;&amp;</span> <span class='lbracket'>[</span><span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x01</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:delay_on_receive</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='int'>6000</span>
            <span class='id identifier rubyid_power?'>power?</span>
            <span class='kw'>return</span> <span class='kw'>true</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- NEC projector, sent fail code for command: 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_req'>req</span>
        <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- NEC projector, response was: 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='comment'>#
</span>    <span class='comment'># Check checksum
</span>    <span class='comment'>#
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_check_checksum'>check_checksum</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- NEC projector, checksum failed for command: 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_req'>req</span>
        <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='comment'>#
</span>    <span class='comment'># Process a successful command
</span>    <span class='comment'>#    add 0x20 to the first byte of the send command
</span>    <span class='comment'>#    Then match the second byte to the second byte of the send command
</span>    <span class='comment'>#
</span>    <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='int'>0x20</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='kw'>when</span> <span class='int'>0x81</span>
                <span class='id identifier rubyid_process_power_status'>process_power_status</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
                <span class='kw'>return</span> <span class='kw'>true</span>
            <span class='kw'>when</span> <span class='int'>0x88</span>
                <span class='id identifier rubyid_process_error_status'>process_error_status</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
                <span class='kw'>return</span> <span class='kw'>true</span>
            <span class='kw'>when</span> <span class='int'>0x85</span>
                <span class='comment'># Return if we can&#39;t work out what was requested initially
</span>                <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_req'>req</span>

                <span class='kw'>case</span> <span class='id identifier rubyid_req'>req</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
                    <span class='kw'>when</span> <span class='int'>0x02</span>
                        <span class='kw'>return</span> <span class='id identifier rubyid_process_input_state'>process_input_state</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
                    <span class='kw'>when</span> <span class='int'>0x03</span>
                        <span class='id identifier rubyid_process_mute_state'>process_mute_state</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span>
                        <span class='kw'>return</span> <span class='kw'>true</span>
                <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='int'>0x22</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='kw'>when</span> <span class='int'>0x03</span>
                <span class='kw'>return</span> <span class='id identifier rubyid_process_input_switch'>process_input_switch</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span>
            <span class='kw'>when</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x01</span>
                <span class='id identifier rubyid_process_lamp_command'>process_lamp_command</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span>
                <span class='kw'>return</span> <span class='kw'>true</span>
            <span class='kw'>when</span> <span class='int'>0x10</span><span class='comma'>,</span> <span class='int'>0x11</span><span class='comma'>,</span> <span class='int'>0x12</span><span class='comma'>,</span> <span class='int'>0x13</span><span class='comma'>,</span> <span class='int'>0x14</span><span class='comma'>,</span> <span class='int'>0x15</span>
                <span class='id identifier rubyid_status_mute'>status_mute</span>    <span class='comment'># update mute status&#39;s (dry)
</span>                <span class='kw'>return</span> <span class='kw'>true</span>
        <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='int'>0x23</span>
        <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='kw'>when</span> <span class='int'>0x10</span>
                <span class='comment'>#
</span>                <span class='comment'># Picture, Volume, Keystone, Image adjust mode
</span>                <span class='comment'>#    how to play this?
</span>                <span class='comment'>#    
</span>                <span class='comment'>#    TODO:: process volume control
</span>                <span class='comment'>#
</span>                <span class='kw'>return</span> <span class='kw'>true</span>
            <span class='kw'>when</span> <span class='int'>0x8A</span>
                <span class='id identifier rubyid_process_projector_information'>process_projector_information</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span>
                <span class='kw'>return</span> <span class='kw'>true</span>

            <span class='kw'>when</span> <span class='int'>0xB1</span>
                <span class='comment'># This is the audio switch command
</span>                <span class='comment'># TODO:: data[-2] == 0:Normal, 1:Error
</span>                <span class='comment'># If error do we retry? Or does it mean something else
</span>                <span class='kw'>return</span> <span class='kw'>true</span> 
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- NEC projector, no status updates defined for response: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- NEC projector, command was: 0x</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_byte_to_hex'>byte_to_hex</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_req'>req</span>
    <span class='kw'>return</span> <span class='kw'>true</span>                                            <span class='comment'># to prevent retries on commands we were not expecting
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="switch_audio-instance_method">
  
    #<strong>switch_audio</strong>(input)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Switches HDMI audio</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_audio'>switch_audio</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='rparen'>)</span>
    <span class='comment'># C0 == HDMI Audio
</span>    <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0x03</span><span class='comma'>,</span> <span class='int'>0xB1</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x02</span><span class='comma'>,</span> <span class='int'>0xC0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_command'>command</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#AUDIO-constant" title="Nec::Projector::NpSeries::AUDIO (constant)">AUDIO</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_send_checksum'>send_checksum</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='symbol'>:switch_audio</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="switch_to-instance_method">
  
    #<strong>switch_to</strong>(input)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244
245
246
247
248
249
250
251
252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_to'>switch_to</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='kw'>if</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>String</span>

    <span class='comment'>#
</span>    <span class='comment'># Input status update
</span>    <span class='comment'>#    As much for internal use as external
</span>    <span class='comment'>#    and with the added benefit of being thread safe
</span>    <span class='comment'>#
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:target_input</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>        <span class='comment'># should do this for power on and off (ensures correct state)
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input_stable</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0x02</span><span class='comma'>,</span> <span class='int'>0x03</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x02</span><span class='comma'>,</span> <span class='int'>0x01</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_command'>command</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#INPUTS-constant" title="Nec::Projector::NpSeries::INPUTS (constant)">INPUTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_input'>input</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_send_checksum'>send_checksum</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='symbol'>:input</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unmute-instance_method">
  
    #<strong>unmute</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>unmutes everything desirable</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unmute'>unmute</span>
    <span class='id identifier rubyid_unmute_picture'>unmute_picture</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="volume-instance_method">
  
    #<strong>volume</strong>(vol)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Volume Modification</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/nec/projector/np_series.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_volume'>volume</span><span class='lparen'>(</span><span class='id identifier rubyid_vol'>vol</span><span class='rparen'>)</span>
    <span class='comment'>#         volume base command              D1    D2    D3    D4    D5 + CKS
</span>    <span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0x03</span><span class='comma'>,</span> <span class='int'>0x10</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x05</span><span class='comma'>,</span> <span class='int'>0x05</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='comma'>,</span> <span class='int'>0x00</span><span class='rbracket'>]</span>
    <span class='comment'># D3 = 00 (absolute vol) or 01 (relative vol)
</span>    <span class='comment'># D4 = value (lower bits 0 to 63)
</span>    <span class='comment'># D5 = value (higher bits always 00h)
</span>
    <span class='id identifier rubyid_vol'>vol</span> <span class='op'>=</span> <span class='int'>63</span> <span class='kw'>if</span> <span class='id identifier rubyid_vol'>vol</span> <span class='op'>&gt;</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:volume_max</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_vol'>vol</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_vol'>vol</span> <span class='op'>&lt;</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:volume_min</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vol'>vol</span>

    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:volume</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vol'>vol</span>

    <span class='id identifier rubyid_send_checksum'>send_checksum</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jun 28 04:36:38 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.4.6).
</div>

    </div>
  </body>
</html>