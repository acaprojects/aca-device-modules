<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Panasonic::Projector::Tcp
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Panasonic::Projector::Tcp";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Panasonic.html" title="Panasonic (module)">Panasonic</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Projector.html" title="Panasonic::Projector (module)">Projector</a></span></span>
     &raquo; 
    <span class="title">Tcp</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Panasonic::Projector::Tcp
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Panasonic::Projector::Tcp</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Orchestrator::Constants, Orchestrator::Transcoder</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>modules/panasonic/projector/tcp.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Documentation: <a
href="https://aca.im/driver_docs/Panasonic/panasonic_pt-vw535n_manual.pdf">aca.im/driver_docs/Panasonic/panasonic_pt-vw535n_manual.pdf</a></p>

<pre class="code ruby"><code class="ruby">also https://aca.im/driver_docs/Panasonic/pt-ez580_en.pdf</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="COMMANDS-constant" class="">COMMANDS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>power_on:</span> <span class='symbol'>:PON</span><span class='comma'>,</span>
    <span class='label'>power_off:</span> <span class='symbol'>:POF</span><span class='comma'>,</span>
    <span class='label'>power_query:</span> <span class='symbol'>:QPW</span><span class='comma'>,</span>
    <span class='label'>freeze:</span> <span class='symbol'>:OFZ</span><span class='comma'>,</span>
    <span class='label'>input:</span> <span class='symbol'>:IIS</span><span class='comma'>,</span>
    <span class='label'>mute:</span> <span class='symbol'>:OSH</span><span class='comma'>,</span>
    <span class='label'>lamp:</span> <span class='symbol'>:&quot;Q$S&quot;</span><span class='comma'>,</span>
    <span class='label'>lamp_hours:</span> <span class='symbol'>:&quot;Q$L&quot;</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="INPUTS-constant" class="">INPUTS =
          <div class="docstring">
  <div class="discussion">
    
<p>Input selection</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>hdmi:</span> <span class='symbol'>:HD1</span><span class='comma'>,</span>
    <span class='label'>hdmi2:</span> <span class='symbol'>:HD2</span><span class='comma'>,</span>
    <span class='label'>vga:</span> <span class='symbol'>:RG1</span><span class='comma'>,</span>
    <span class='label'>vga2:</span> <span class='symbol'>:RG2</span><span class='comma'>,</span>
    <span class='label'>miracast:</span> <span class='symbol'>:MC1</span><span class='comma'>,</span>
    <span class='label'>dvi:</span> <span class='symbol'>:DVI</span><span class='comma'>,</span>
    <span class='label'>displayport:</span> <span class='symbol'>:DP1</span><span class='comma'>,</span>
    <span class='label'>hdbaset:</span> <span class='symbol'>:DL1</span><span class='comma'>,</span>
    <span class='label'>composite:</span> <span class='symbol'>:VID</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="ERRORS-constant" class="">ERRORS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>ERR1:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1: Undefined control command</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ERR2:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>2: Out of parameter range</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ERR3:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>3: Busy state or no-acceptable period</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ERR4:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>4: Timeout or no-acceptable period</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ERR5:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>5: Wrong data length</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ERRA:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>A: Password mismatch</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ER401:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>401: Command cannot be executed</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>ER402:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>402: Invalid parameter is sent</span><span class='tstring_end'>&#39;</span></span>
<span class='rbrace'>}</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected-instance_method" title="#connected (instance method)">#<strong>connected</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnected-instance_method" title="#disconnected (instance method)">#<strong>disconnected</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lamp_hours%3F-instance_method" title="#lamp_hours? (instance method)">#<strong>lamp_hours?</strong>(**options, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute-instance_method" title="#mute (instance method)">#<strong>mute</strong>(val = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Mute Audio and Video.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_load-instance_method" title="#on_load (instance method)">#<strong>on_load</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_update-instance_method" title="#on_update (instance method)">#<strong>on_update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#power-instance_method" title="#power (instance method)">#<strong>power</strong>(state, opt = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Power commands.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#power%3F-instance_method" title="#power? (instance method)">#<strong>power?</strong>(**options, &amp;block)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#received-instance_method" title="#received (instance method)">#<strong>received</strong>(data, resolve, command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Data is default received as a string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_to-instance_method" title="#switch_to (instance method)">#<strong>switch_to</strong>(input)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unmute-instance_method" title="#unmute (instance method)">#<strong>unmute</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="connected-instance_method">
  
    #<strong>connected</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_connected'>connected</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disconnected-instance_method">
  
    #<strong>disconnected</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disconnected'>disconnected</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lamp_hours?-instance_method">
  
    #<strong>lamp_hours?</strong>(**options, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_lamp_hours?'>lamp_hours?</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:emit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:lamp_hours</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mute-instance_method">
  
    #<strong>mute</strong>(val = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Mute Audio and Video</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mute'>mute</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_actual'>actual</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>requested to mute</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:mute</span><span class='comma'>,</span> <span class='id identifier rubyid_actual'>actual</span><span class='rparen'>)</span>    <span class='comment'># Audio + Video
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_load-instance_method">
  
    #<strong>on_load</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_load'>on_load</span>
    <span class='ivar'>@check_scheduled</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:stable_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>  <span class='comment'># Stable by default (allows manual on and off)
</span>
    <span class='comment'># Meta data for inquiring interfaces
</span>    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:projector</span>

    <span class='comment'># The projector drops the connection when there is no activity
</span>    <span class='id identifier rubyid_schedule'>schedule</span><span class='period'>.</span><span class='id identifier rubyid_every'>every</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>60s</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:connected</span><span class='rbracket'>]</span>
            <span class='id identifier rubyid_power?'>power?</span><span class='lparen'>(</span><span class='label'>priority:</span> <span class='int'>0</span><span class='rparen'>)</span>
            <span class='id identifier rubyid_lamp_hours?'>lamp_hours?</span><span class='lparen'>(</span><span class='label'>priority:</span> <span class='int'>0</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_on_update'>on_update</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_update-instance_method">
  
    #<strong>on_update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_update'>on_update</span>
    <span class='ivar'>@username</span> <span class='op'>=</span> <span class='id identifier rubyid_setting'>setting</span><span class='lparen'>(</span><span class='symbol'>:username</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>admin1</span><span class='tstring_end'>&#39;</span></span>
    <span class='ivar'>@password</span> <span class='op'>=</span> <span class='id identifier rubyid_setting'>setting</span><span class='lparen'>(</span><span class='symbol'>:password</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>panasonic</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="power-instance_method">
  
    #<strong>power</strong>(state, opt = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Power commands</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_power'>power</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_opt'>opt</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:stable_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_is_affirmative?'>is_affirmative?</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
        <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>On</span>
        <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:power_on</span><span class='comma'>,</span> <span class='label'>retries:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='symbol'>:power</span><span class='comma'>,</span> <span class='label'>delay_on_receive:</span> <span class='int'>8000</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>requested to power on</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:lamp</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Off</span>
        <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:power_off</span><span class='comma'>,</span> <span class='label'>retries:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='symbol'>:power</span><span class='comma'>,</span> <span class='label'>delay_on_receive:</span> <span class='int'>8000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span> <span class='kw'>do</span>
            <span class='id identifier rubyid_schedule'>schedule</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>10s</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:lamp</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>requested to power off</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="power?-instance_method">
  
    #<strong>power?</strong>(**options, &amp;block)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_power?'>power?</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:emit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:lamp</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="received-instance_method">
  
    #<strong>received</strong>(data, resolve, command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Data is default received as a string</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_received'>received</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='id identifier rubyid_resolve'>resolve</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>        <span class='comment'># Data is default received as a string
</span>    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sent \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot; for </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span> <span class='op'>?</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unknown</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>

    <span class='comment'># This is the ready response
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span>
        <span class='ivar'>@use_pass</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='ivar'>@use_pass</span>
            <span class='ivar'>@pass</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@username</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@password</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>3</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
            <span class='ivar'>@pass</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='ivar'>@pass</span><span class='rparen'>)</span>
        <span class='kw'>end</span>

        <span class='comment'># Ignore this as it is not a response
</span>        <span class='kw'>return</span> <span class='symbol'>:ignore</span>
    <span class='kw'>else</span>
        <span class='comment'># Error Response
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:last_error</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#ERRORS-constant" title="Panasonic::Projector::Tcp::ERRORS (constant)">ERRORS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_error'>error</span><span class='rbracket'>]</span>

            <span class='comment'># Check for busy or timeout
</span>            <span class='kw'>if</span> <span class='id identifier rubyid_error'>error</span> <span class='op'>==</span> <span class='symbol'>:ERR3</span> <span class='op'>||</span> <span class='id identifier rubyid_error'>error</span> <span class='op'>==</span> <span class='symbol'>:ERR4</span>
                <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Proj busy: </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:last_error</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>return</span> <span class='symbol'>:retry</span>
            <span class='kw'>else</span>
                <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Proj error: </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:last_error</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>return</span> <span class='symbol'>:abort</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_cmd'>cmd</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#COMMANDS-constant" title="Panasonic::Projector::Tcp::COMMANDS (constant)">COMMANDS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>

        <span class='kw'>case</span> <span class='id identifier rubyid_cmd'>cmd</span>
        <span class='kw'>when</span> <span class='symbol'>:power_on</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>when</span> <span class='symbol'>:power_off</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='kw'>when</span> <span class='symbol'>:power_query</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='kw'>when</span> <span class='symbol'>:freeze</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:frozen</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='kw'>when</span> <span class='symbol'>:input</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#INPUTS-constant" title="Panasonic::Projector::Tcp::INPUTS (constant)">INPUTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span>
        <span class='kw'>when</span> <span class='symbol'>:mute</span>
            <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:mute</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='kw'>else</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_command'>command</span>
                <span class='kw'>if</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:lamp</span>
                    <span class='id identifier rubyid_ival'>ival</span> <span class='op'>=</span> <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ival'>ival</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>||</span> <span class='id identifier rubyid_ival'>ival</span> <span class='op'>==</span> <span class='int'>2</span>
                    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:warming</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ival'>ival</span> <span class='op'>==</span> <span class='int'>1</span>
                    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:cooling</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ival'>ival</span> <span class='op'>==</span> <span class='int'>3</span>

                    <span class='kw'>if</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:warming</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:cooling</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@check_scheduled</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:stable_state</span><span class='rbracket'>]</span>
                        <span class='ivar'>@check_scheduled</span> <span class='op'>=</span> <span class='kw'>true</span>
                        <span class='id identifier rubyid_schedule'>schedule</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>13s</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
                            <span class='ivar'>@check_scheduled</span> <span class='op'>=</span> <span class='kw'>false</span>
                            <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-- checking state</span><span class='tstring_end'>&quot;</span></span>
                            <span class='id identifier rubyid_power?'>power?</span><span class='lparen'>(</span><span class='label'>priority:</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>do</span>
                                <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power</span><span class='rbracket'>]</span>
                                <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>!=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span>
                                    <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='op'>!</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:cooling</span><span class='rbracket'>]</span>
                                        <span class='id identifier rubyid_power'>power</span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                                    <span class='kw'>end</span>
                                <span class='kw'>elsif</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:cooling</span><span class='rbracket'>]</span>
                                    <span class='id identifier rubyid_power'>power</span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                                <span class='kw'>else</span>
                                    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:stable_state</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
                                    <span class='id identifier rubyid_switch_to'>switch_to</span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:power_target</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>On</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
                                <span class='kw'>end</span>
                            <span class='kw'>end</span>
                        <span class='kw'>end</span>
                    <span class='kw'>end</span> 
                <span class='kw'>elsif</span> <span class='id identifier rubyid_command'>command</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:lamp_hours</span>
                    <span class='comment'># Resp looks like: &quot;001682&quot;
</span>                    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:lamp_usage</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                <span class='kw'>end</span>
            <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='symbol'>:success</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="switch_to-instance_method">
  
    #<strong>switch_to</strong>(input)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_to'>switch_to</span><span class='lparen'>(</span><span class='id identifier rubyid_input'>input</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_input'>input</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#INPUTS-constant" title="Panasonic::Projector::Tcp::INPUTS (constant)">INPUTS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span> <span class='id identifier rubyid_input'>input</span>

    <span class='comment'># Projector doesn&#39;t automatically unmute
</span>    <span class='id identifier rubyid_unmute'>unmute</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:mute</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:input</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#INPUTS-constant" title="Panasonic::Projector::Tcp::INPUTS (constant)">INPUTS</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_input'>input</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>retries:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='label'>delay_on_receive:</span> <span class='int'>2000</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>requested to switch to: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_input'>input</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:input</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_input'>input</span>    <span class='comment'># for a responsive UI
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unmute-instance_method">
  
    #<strong>unmute</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'modules/panasonic/projector/tcp.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unmute'>unmute</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>requested to unmute</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_do_send'>do_send</span><span class='lparen'>(</span><span class='symbol'>:mute</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jun 28 04:36:38 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.4.6).
</div>

    </div>
  </body>
</html>